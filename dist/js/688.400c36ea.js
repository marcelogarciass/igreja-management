"use strict";(self["webpackChunkigreja_management"]=self["webpackChunkigreja_management"]||[]).push([[688],{113:(e,t,n)=>{var r=n(6518),o=n(9213).find,i=n(6469),a="find",u=!0;a in[]&&Array(1)[a]((function(){u=!1})),r({target:"Array",proto:!0,forced:u},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),i(a)},116:(e,t,n)=>{var r=n(6518),o=n(2652),i=n(9306),a=n(8551),u=n(1767);r({target:"Iterator",proto:!0,real:!0},{find:function(e){a(this),i(e);var t=u(this),n=0;return o(t,(function(t,r){if(e(t,n++))return r(t)}),{IS_RECORD:!0,INTERRUPTED:!0}).result}})},9688:(e,t,n)=>{n.r(t),n.d(t,{default:()=>S});n(3288),n(2010),n(2892),n(9868);var r=n(641),o=n(3751),i=n(33),a={class:"contributions-container"},u={class:"form-container"},l={class:"form-section"},c={class:"form-group"},s=["value"],d={class:"form-row"},m={class:"form-group"},b={class:"form-group"},p={class:"form-group"},f={class:"form-group"},v={class:"form-group"},k={class:"contributions-list"},h={key:0},L=["onClick"],g={key:1};function y(e,t,n,y,w,x){return(0,r.uX)(),(0,r.CE)("div",a,[t[19]||(t[19]=(0,r.Lk)("h1",null,"Registro de Dízimos e Ofertas",-1)),(0,r.Lk)("div",u,[(0,r.Lk)("form",{onSubmit:t[6]||(t[6]=(0,o.D$)((function(){return y.handleSubmit&&y.handleSubmit.apply(y,arguments)}),["prevent"]))},[(0,r.Lk)("div",l,[(0,r.Lk)("div",c,[t[8]||(t[8]=(0,r.Lk)("label",{for:"memberSelect"},"Membro*",-1)),(0,r.bo)((0,r.Lk)("select",{id:"memberSelect","onUpdate:modelValue":t[0]||(t[0]=function(e){return y.contributionForm.memberId=e}),required:""},[t[7]||(t[7]=(0,r.Lk)("option",{value:""},"Selecione um membro",-1)),((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(y.members,(function(e){return(0,r.uX)(),(0,r.CE)("option",{key:e.id,value:e.id},(0,i.v_)(e.name),9,s)})),128))],512),[[o.u1,y.contributionForm.memberId]])]),(0,r.Lk)("div",d,[(0,r.Lk)("div",m,[t[10]||(t[10]=(0,r.Lk)("label",{for:"type"},"Tipo*",-1)),(0,r.bo)((0,r.Lk)("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=function(e){return y.contributionForm.type=e}),required:""},t[9]||(t[9]=[(0,r.Lk)("option",{value:"dizimo"},"Dízimo",-1),(0,r.Lk)("option",{value:"oferta"},"Oferta",-1)]),512),[[o.u1,y.contributionForm.type]])]),(0,r.Lk)("div",b,[t[11]||(t[11]=(0,r.Lk)("label",{for:"amount"},"Valor*",-1)),(0,r.bo)((0,r.Lk)("input",{type:"number",id:"amount","onUpdate:modelValue":t[2]||(t[2]=function(e){return y.contributionForm.amount=e}),required:"",step:"0.01",min:"0",placeholder:"0,00"},null,512),[[o.Jo,y.contributionForm.amount]])]),(0,r.Lk)("div",p,[t[13]||(t[13]=(0,r.Lk)("label",{for:"paymentMethod"},"Forma de Pagamento*",-1)),(0,r.bo)((0,r.Lk)("select",{id:"paymentMethod","onUpdate:modelValue":t[3]||(t[3]=function(e){return y.contributionForm.paymentMethod=e}),required:""},t[12]||(t[12]=[(0,r.Lk)("option",{value:"dinheiro"},"Dinheiro",-1),(0,r.Lk)("option",{value:"pix"},"PIX",-1),(0,r.Lk)("option",{value:"cartao"},"Cartão",-1),(0,r.Lk)("option",{value:"transferencia"},"Transferência",-1)]),512),[[o.u1,y.contributionForm.paymentMethod]])])]),(0,r.Lk)("div",f,[t[14]||(t[14]=(0,r.Lk)("label",{for:"date"},"Data*",-1)),(0,r.bo)((0,r.Lk)("input",{type:"date",id:"date","onUpdate:modelValue":t[4]||(t[4]=function(e){return y.contributionForm.date=e}),required:""},null,512),[[o.Jo,y.contributionForm.date]])]),(0,r.Lk)("div",v,[t[15]||(t[15]=(0,r.Lk)("label",{for:"notes"},"Observações",-1)),(0,r.bo)((0,r.Lk)("textarea",{id:"notes","onUpdate:modelValue":t[5]||(t[5]=function(e){return y.contributionForm.notes=e}),placeholder:"Observações adicionais"},null,512),[[o.Jo,y.contributionForm.notes]])])]),t[16]||(t[16]=(0,r.Lk)("button",{type:"submit",class:"submit-button"}," Registrar Contribuição ",-1))],32)]),(0,r.Lk)("div",k,[t[18]||(t[18]=(0,r.Lk)("h2",null,"Contribuições Registradas",-1)),y.contributions.length>0?((0,r.uX)(),(0,r.CE)("table",h,[t[17]||(t[17]=(0,r.Lk)("thead",null,[(0,r.Lk)("tr",null,[(0,r.Lk)("th",null,"Membro"),(0,r.Lk)("th",null,"Tipo"),(0,r.Lk)("th",null,"Valor"),(0,r.Lk)("th",null,"Data"),(0,r.Lk)("th",null,"Forma de Pagamento"),(0,r.Lk)("th",null,"Ações")])],-1)),(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(y.contributions,(function(e){return(0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,i.v_)(y.getMemberName(e.memberId)),1),(0,r.Lk)("td",null,(0,i.v_)("dizimo"===e.type?"Dízimo":"Oferta"),1),(0,r.Lk)("td",null,"R$ "+(0,i.v_)(Number(e.amount).toFixed(2)),1),(0,r.Lk)("td",null,(0,i.v_)(new Date(e.date).toLocaleDateString()),1),(0,r.Lk)("td",null,(0,i.v_)(e.paymentMethod),1),(0,r.Lk)("td",null,[(0,r.Lk)("button",{onClick:function(t){return y.deleteContribution(e.id)},class:"delete-button"}," Excluir ",8,L)])])})),128))])])):((0,r.uX)(),(0,r.CE)("p",g,"Nenhuma contribuição registrada"))])])}var w=n(4048),x=n(9201),F=n(388),A=(n(2008),n(113),n(8980),n(2062),n(4114),n(1688),n(8111),n(2489),n(116),n(1701),n(6099),n(953)),I=n(4051),C=n(1884);const D={name:"ContributionsView",setup:function(){var e=(0,A.KR)({memberId:"",type:"dizimo",amount:"",date:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}),t=(0,A.KR)([]),n=(0,A.KR)([]),o=function(){var e=(0,F.A)((0,w.A)().mark((function e(){var t;return(0,w.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.GG)((0,C.rJ)(I.db,"members"));case 3:t=e.sent,n.value=t.docs.map((function(e){return(0,x.A)({id:e.id},e.data())})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Erro ao carregar membros:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),i=function(){var e=(0,F.A)((0,w.A)().mark((function e(){var n;return(0,w.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,C.GG)((0,C.rJ)(I.db,"contributions"));case 3:n=e.sent,t.value=n.docs.map((function(e){return(0,x.A)({id:e.id},e.data())})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.error("Erro ao carregar contribuições:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),a=function(){var n=(0,F.A)((0,w.A)().mark((function n(){var r,o,i,a,u;return(0,w.A)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,console.log("Iniciando salvamento..."),r=l(e.value.memberId),o={memberId:e.value.memberId,memberName:r,type:e.value.type,amount:Number(e.value.amount),date:e.value.date,paymentMethod:e.value.paymentMethod,notes:e.value.notes,createdAt:(new Date).toISOString()},console.log("Dados a serem salvos:",o),i=(0,C.rJ)(I.db,"contributions"),a=(0,C.H9)(i,"ttYvm5vXR48xyQbF1dKP"),n.next=9,(0,C.BN)(a,o);case 9:console.log("Documento salvo com sucesso!"),u=t.value.findIndex((function(e){return"ttYvm5vXR48xyQbF1dKP"===e.id})),-1!==u?t.value[u]=(0,x.A)({id:"ttYvm5vXR48xyQbF1dKP"},o):t.value.push((0,x.A)({id:"ttYvm5vXR48xyQbF1dKP"},o)),alert("Contribuição registrada com sucesso!"),e.value={memberId:"",type:"dizimo",amount:"",date:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""},n.next=20;break;case 16:n.prev=16,n.t0=n["catch"](0),console.error("Erro detalhado:",n.t0),alert("Erro ao registrar contribuição: "+n.t0.message);case 20:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(){return n.apply(this,arguments)}}(),u=function(){var e=(0,F.A)((0,w.A)().mark((function e(n){return(0,w.A)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!confirm("Deseja realmente excluir este registro?")){e.next=10;break}return e.prev=1,e.next=4,(0,C.kd)((0,C.H9)(I.db,"contributions",n));case 4:t.value=t.value.filter((function(e){return e.id!==n})),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),console.error("Erro ao excluir registro:",e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),l=function(e){var t=n.value.find((function(t){return t.id===e}));return t?t.name:"Membro não encontrado"};return(0,r.sV)((function(){o(),i()})),{contributionForm:e,contributions:t,members:n,handleSubmit:a,deleteContribution:u,getMemberName:l}}};var E=n(6262);const R=(0,E.A)(D,[["render",y],["__scopeId","data-v-e96014b4"]]),S=R},9868:(e,t,n)=>{var r=n(6518),o=n(9504),i=n(1291),a=n(1240),u=n(2333),l=n(9039),c=RangeError,s=String,d=Math.floor,m=o(u),b=o("".slice),p=o(1..toFixed),f=function(e,t,n){return 0===t?n:t%2===1?f(e,t-1,n*e):f(e*e,t/2,n)},v=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},k=function(e,t,n){var r=-1,o=n;while(++r<6)o+=t*e[r],e[r]=o%1e7,o=d(o/1e7)},h=function(e,t){var n=6,r=0;while(--n>=0)r+=e[n],e[n]=d(r/t),r=r%t*1e7},L=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var r=s(e[t]);n=""===n?r:n+m("0",7-r.length)+r}return n},g=l((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!l((function(){p({})}));r({target:"Number",proto:!0,forced:g},{toFixed:function(e){var t,n,r,o,u=a(this),l=i(e),d=[0,0,0,0,0,0],p="",g="0";if(l<0||l>20)throw new c("Incorrect fraction digits");if(u!==u)return"NaN";if(u<=-1e21||u>=1e21)return s(u);if(u<0&&(p="-",u=-u),u>1e-21)if(t=v(u*f(2,69,1))-69,n=t<0?u*f(2,-t,1):u/f(2,t,1),n*=4503599627370496,t=52-t,t>0){k(d,0,n),r=l;while(r>=7)k(d,1e7,0),r-=7;k(d,f(10,r,1),0),r=t-1;while(r>=23)h(d,1<<23),r-=23;h(d,1<<r),k(d,1,1),h(d,2),g=L(d)}else k(d,0,n),k(d,1<<-t,0),g=L(d)+m("0",l);return l>0?(o=g.length,g=p+(o<=l?"0."+m("0",l-o)+g:b(g,0,o-l)+"."+b(g,o-l))):g=p+g,g}})}}]);
//# sourceMappingURL=688.400c36ea.js.map