import{r as c,o as F,d as l,e as o,k as I,l as d,z as v,F as y,m as S,v as p,b as s,t as m}from"./vendor-bd6f2026.js";import{_ as D}from"./index-1fd04927.js";const C={name:"ContributionsView",setup(){const i=c({memberId:"",type:"dizimo",amount:"",date:new Date().toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}),t=c([]),u=c([]),r=()=>{try{const n=localStorage.getItem("members");n&&(u.value=JSON.parse(n))}catch(n){console.error("Erro ao carregar membros:",n)}},f=()=>{try{const n=localStorage.getItem("contributions");n&&(t.value=JSON.parse(n))}catch(n){console.error("Erro ao carregar contribuições:",n)}},g=()=>{try{console.log("Iniciando salvamento...");const n=b(i.value.memberId),a={id:"local-"+Date.now(),memberId:i.value.memberId,memberName:n,type:i.value.type,amount:Number(i.value.amount),date:i.value.date,paymentMethod:i.value.paymentMethod,notes:i.value.notes,createdAt:new Date().toISOString()};console.log("Dados a serem salvos:",a),t.value.push(a),localStorage.setItem("contributions",JSON.stringify(t.value)),console.log("Contribuição salva com sucesso!"),alert("Contribuição registrada com sucesso!"),i.value={memberId:"",type:"dizimo",amount:"",date:new Date().toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}}catch(n){console.error("Erro detalhado:",n),alert("Erro ao registrar contribuição: "+n.message)}},e=n=>{if(confirm("Deseja realmente excluir esta contribuição?"))try{t.value=t.value.filter(a=>a.id!==n),localStorage.setItem("contributions",JSON.stringify(t.value))}catch(a){console.error("Erro ao excluir contribuição:",a)}},b=n=>{const a=u.value.find(M=>M.id===n);return a?a.name:"Membro não encontrado"};return F(()=>{r(),f()}),{contributionForm:i,contributions:t,members:u,handleSubmit:g,deleteContribution:e,getMemberName:b}}},h={class:"contributions-container"},O={class:"form-container"},V={class:"form-section"},w={class:"form-group"},x=["value"],N={class:"form-row"},_={class:"form-group"},k={class:"form-group"},z={class:"form-group"},E={class:"form-group"},T={class:"form-group"},U={class:"contributions-list"},q={key:0},J=["onClick"],R={key:1};function B(i,t,u,r,f,g){return s(),l("div",h,[t[19]||(t[19]=o("h1",null,"Registro de Dízimos e Ofertas",-1)),o("div",O,[o("form",{onSubmit:t[6]||(t[6]=I((...e)=>r.handleSubmit&&r.handleSubmit(...e),["prevent"]))},[o("div",V,[o("div",w,[t[8]||(t[8]=o("label",{for:"memberSelect"},"Membro*",-1)),d(o("select",{id:"memberSelect","onUpdate:modelValue":t[0]||(t[0]=e=>r.contributionForm.memberId=e),required:""},[t[7]||(t[7]=o("option",{value:""},"Selecione um membro",-1)),(s(!0),l(y,null,S(r.members,e=>(s(),l("option",{key:e.id,value:e.id},m(e.name),9,x))),128))],512),[[v,r.contributionForm.memberId]])]),o("div",N,[o("div",_,[t[10]||(t[10]=o("label",{for:"type"},"Tipo*",-1)),d(o("select",{id:"type","onUpdate:modelValue":t[1]||(t[1]=e=>r.contributionForm.type=e),required:""},t[9]||(t[9]=[o("option",{value:"dizimo"},"Dízimo",-1),o("option",{value:"oferta"},"Oferta",-1)]),512),[[v,r.contributionForm.type]])]),o("div",k,[t[11]||(t[11]=o("label",{for:"amount"},"Valor*",-1)),d(o("input",{type:"number",id:"amount","onUpdate:modelValue":t[2]||(t[2]=e=>r.contributionForm.amount=e),required:"",step:"0.01",min:"0",placeholder:"0,00"},null,512),[[p,r.contributionForm.amount]])]),o("div",z,[t[13]||(t[13]=o("label",{for:"paymentMethod"},"Forma de Pagamento*",-1)),d(o("select",{id:"paymentMethod","onUpdate:modelValue":t[3]||(t[3]=e=>r.contributionForm.paymentMethod=e),required:""},t[12]||(t[12]=[o("option",{value:"dinheiro"},"Dinheiro",-1),o("option",{value:"pix"},"PIX",-1),o("option",{value:"cartao"},"Cartão",-1),o("option",{value:"transferencia"},"Transferência",-1)]),512),[[v,r.contributionForm.paymentMethod]])])]),o("div",E,[t[14]||(t[14]=o("label",{for:"date"},"Data*",-1)),d(o("input",{type:"date",id:"date","onUpdate:modelValue":t[4]||(t[4]=e=>r.contributionForm.date=e),required:""},null,512),[[p,r.contributionForm.date]])]),o("div",T,[t[15]||(t[15]=o("label",{for:"notes"},"Observações",-1)),d(o("textarea",{id:"notes","onUpdate:modelValue":t[5]||(t[5]=e=>r.contributionForm.notes=e),placeholder:"Observações adicionais"},null,512),[[p,r.contributionForm.notes]])])]),t[16]||(t[16]=o("button",{type:"submit",class:"submit-button"}," Registrar Contribuição ",-1))],32)]),o("div",U,[t[18]||(t[18]=o("h2",null,"Contribuições Registradas",-1)),r.contributions.length>0?(s(),l("table",q,[t[17]||(t[17]=o("thead",null,[o("tr",null,[o("th",null,"Membro"),o("th",null,"Tipo"),o("th",null,"Valor"),o("th",null,"Data"),o("th",null,"Forma de Pagamento"),o("th",null,"Ações")])],-1)),o("tbody",null,[(s(!0),l(y,null,S(r.contributions,e=>(s(),l("tr",{key:e.id},[o("td",null,m(r.getMemberName(e.memberId)),1),o("td",null,m(e.type==="dizimo"?"Dízimo":"Oferta"),1),o("td",null,"R$ "+m(Number(e.amount).toFixed(2)),1),o("td",null,m(new Date(e.date).toLocaleDateString()),1),o("td",null,m(e.paymentMethod),1),o("td",null,[o("button",{onClick:b=>r.deleteContribution(e.id),class:"delete-button"}," Excluir ",8,J)])]))),128))])])):(s(),l("p",R,"Nenhuma contribuição registrada"))])])}const L=D(C,[["render",B],["__scopeId","data-v-192d5c11"]]);export{L as default};
