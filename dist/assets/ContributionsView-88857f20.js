import{_ as e,r as o,o as t,c as r,a,w as n,b as i,v as l,F as u,d as s,e as m,f as d,t as c}from"./index-0cdcbb43.js";const b={class:"contributions-container"},p={class:"form-container"},v={class:"form-section"},g={class:"form-group"},h=["value"],f={class:"form-row"},y={class:"form-group"},S={class:"form-group"},I={class:"form-group"},F={class:"form-group"},D={class:"form-group"},M={class:"contributions-list"},O={key:0},C=["onClick"],N={key:1};const V=e({name:"ContributionsView",setup(){const e=o({memberId:"",type:"dizimo",amount:"",date:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}),r=o([]),a=o([]),n=e=>{const o=a.value.find((o=>o.id===e));return o?o.name:"Membro não encontrado"};return t((()=>{(()=>{try{const e=localStorage.getItem("members");e&&(a.value=JSON.parse(e))}catch(e){console.error("Erro ao carregar membros:",e)}})(),(()=>{try{const e=localStorage.getItem("contributions");e&&(r.value=JSON.parse(e))}catch(e){console.error("Erro ao carregar contribuições:",e)}})()})),{contributionForm:e,contributions:r,members:a,handleSubmit:()=>{try{console.log("Iniciando salvamento...");const o=n(e.value.memberId),t={id:"local-"+Date.now(),memberId:e.value.memberId,memberName:o,type:e.value.type,amount:Number(e.value.amount),date:e.value.date,paymentMethod:e.value.paymentMethod,notes:e.value.notes,createdAt:(new Date).toISOString()};console.log("Dados a serem salvos:",t),r.value.push(t),localStorage.setItem("contributions",JSON.stringify(r.value)),console.log("Contribuição salva com sucesso!"),alert("Contribuição registrada com sucesso!"),e.value={memberId:"",type:"dizimo",amount:"",date:(new Date).toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}}catch(o){console.error("Erro detalhado:",o),alert("Erro ao registrar contribuição: "+o.message)}},deleteContribution:e=>{if(confirm("Deseja realmente excluir esta contribuição?"))try{r.value=r.value.filter((o=>o.id!==e)),localStorage.setItem("contributions",JSON.stringify(r.value))}catch(o){console.error("Erro ao excluir contribuição:",o)}},getMemberName:n}}},[["render",function(e,o,t,V,w,x){return d(),r("div",b,[o[19]||(o[19]=a("h1",null,"Registro de Dízimos e Ofertas",-1)),a("div",p,[a("form",{onSubmit:o[6]||(o[6]=n(((...e)=>V.handleSubmit&&V.handleSubmit(...e)),["prevent"]))},[a("div",v,[a("div",g,[o[8]||(o[8]=a("label",{for:"memberSelect"},"Membro*",-1)),i(a("select",{id:"memberSelect","onUpdate:modelValue":o[0]||(o[0]=e=>V.contributionForm.memberId=e),required:""},[o[7]||(o[7]=a("option",{value:""},"Selecione um membro",-1)),(d(!0),r(u,null,s(V.members,(e=>(d(),r("option",{key:e.id,value:e.id},c(e.name),9,h)))),128))],512),[[l,V.contributionForm.memberId]])]),a("div",f,[a("div",y,[o[10]||(o[10]=a("label",{for:"type"},"Tipo*",-1)),i(a("select",{id:"type","onUpdate:modelValue":o[1]||(o[1]=e=>V.contributionForm.type=e),required:""},o[9]||(o[9]=[a("option",{value:"dizimo"},"Dízimo",-1),a("option",{value:"oferta"},"Oferta",-1)]),512),[[l,V.contributionForm.type]])]),a("div",S,[o[11]||(o[11]=a("label",{for:"amount"},"Valor*",-1)),i(a("input",{type:"number",id:"amount","onUpdate:modelValue":o[2]||(o[2]=e=>V.contributionForm.amount=e),required:"",step:"0.01",min:"0",placeholder:"0,00"},null,512),[[m,V.contributionForm.amount]])]),a("div",I,[o[13]||(o[13]=a("label",{for:"paymentMethod"},"Forma de Pagamento*",-1)),i(a("select",{id:"paymentMethod","onUpdate:modelValue":o[3]||(o[3]=e=>V.contributionForm.paymentMethod=e),required:""},o[12]||(o[12]=[a("option",{value:"dinheiro"},"Dinheiro",-1),a("option",{value:"pix"},"PIX",-1),a("option",{value:"cartao"},"Cartão",-1),a("option",{value:"transferencia"},"Transferência",-1)]),512),[[l,V.contributionForm.paymentMethod]])])]),a("div",F,[o[14]||(o[14]=a("label",{for:"date"},"Data*",-1)),i(a("input",{type:"date",id:"date","onUpdate:modelValue":o[4]||(o[4]=e=>V.contributionForm.date=e),required:""},null,512),[[m,V.contributionForm.date]])]),a("div",D,[o[15]||(o[15]=a("label",{for:"notes"},"Observações",-1)),i(a("textarea",{id:"notes","onUpdate:modelValue":o[5]||(o[5]=e=>V.contributionForm.notes=e),placeholder:"Observações adicionais"},null,512),[[m,V.contributionForm.notes]])])]),o[16]||(o[16]=a("button",{type:"submit",class:"submit-button"}," Registrar Contribuição ",-1))],32)]),a("div",M,[o[18]||(o[18]=a("h2",null,"Contribuições Registradas",-1)),V.contributions.length>0?(d(),r("table",O,[o[17]||(o[17]=a("thead",null,[a("tr",null,[a("th",null,"Membro"),a("th",null,"Tipo"),a("th",null,"Valor"),a("th",null,"Data"),a("th",null,"Forma de Pagamento"),a("th",null,"Ações")])],-1)),a("tbody",null,[(d(!0),r(u,null,s(V.contributions,(e=>(d(),r("tr",{key:e.id},[a("td",null,c(V.getMemberName(e.memberId)),1),a("td",null,c("dizimo"===e.type?"Dízimo":"Oferta"),1),a("td",null,"R$ "+c(Number(e.amount).toFixed(2)),1),a("td",null,c(new Date(e.date).toLocaleDateString()),1),a("td",null,c(e.paymentMethod),1),a("td",null,[a("button",{onClick:o=>V.deleteContribution(e.id),class:"delete-button"}," Excluir ",8,C)])])))),128))])])):(d(),r("p",N,"Nenhuma contribuição registrada"))])])}],["__scopeId","data-v-192d5c11"]]);export{V as default};
