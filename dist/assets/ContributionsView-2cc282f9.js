import{_ as F,r as c,o as I,c as l,a as o,w as D,b as d,v,F as y,d as S,e as p,f as s,t as m}from"./index-b831f3f4.js";const C={name:"ContributionsView",setup(){const i=c({memberId:"",type:"dizimo",amount:"",date:new Date().toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}),e=c([]),u=c([]),r=()=>{try{const n=localStorage.getItem("members");n&&(u.value=JSON.parse(n))}catch(n){console.error("Erro ao carregar membros:",n)}},f=()=>{try{const n=localStorage.getItem("contributions");n&&(e.value=JSON.parse(n))}catch(n){console.error("Erro ao carregar contribuições:",n)}},g=()=>{try{console.log("Iniciando salvamento...");const n=b(i.value.memberId),a={id:"local-"+Date.now(),memberId:i.value.memberId,memberName:n,type:i.value.type,amount:Number(i.value.amount),date:i.value.date,paymentMethod:i.value.paymentMethod,notes:i.value.notes,createdAt:new Date().toISOString()};console.log("Dados a serem salvos:",a),e.value.push(a),localStorage.setItem("contributions",JSON.stringify(e.value)),console.log("Contribuição salva com sucesso!"),alert("Contribuição registrada com sucesso!"),i.value={memberId:"",type:"dizimo",amount:"",date:new Date().toISOString().split("T")[0],paymentMethod:"dinheiro",notes:""}}catch(n){console.error("Erro detalhado:",n),alert("Erro ao registrar contribuição: "+n.message)}},t=n=>{if(confirm("Deseja realmente excluir esta contribuição?"))try{e.value=e.value.filter(a=>a.id!==n),localStorage.setItem("contributions",JSON.stringify(e.value))}catch(a){console.error("Erro ao excluir contribuição:",a)}},b=n=>{const a=u.value.find(M=>M.id===n);return a?a.name:"Membro não encontrado"};return I(()=>{r(),f()}),{contributionForm:i,contributions:e,members:u,handleSubmit:g,deleteContribution:t,getMemberName:b}}},h={class:"contributions-container"},w={class:"form-container"},O={class:"form-section"},V={class:"form-group"},x=["value"],N={class:"form-row"},_={class:"form-group"},k={class:"form-group"},z={class:"form-group"},E={class:"form-group"},T={class:"form-group"},U={class:"contributions-list"},q={key:0},J=["onClick"],R={key:1};function B(i,e,u,r,f,g){return s(),l("div",h,[e[19]||(e[19]=o("h1",null,"Registro de Dízimos e Ofertas",-1)),o("div",w,[o("form",{onSubmit:e[6]||(e[6]=D((...t)=>r.handleSubmit&&r.handleSubmit(...t),["prevent"]))},[o("div",O,[o("div",V,[e[8]||(e[8]=o("label",{for:"memberSelect"},"Membro*",-1)),d(o("select",{id:"memberSelect","onUpdate:modelValue":e[0]||(e[0]=t=>r.contributionForm.memberId=t),required:""},[e[7]||(e[7]=o("option",{value:""},"Selecione um membro",-1)),(s(!0),l(y,null,S(r.members,t=>(s(),l("option",{key:t.id,value:t.id},m(t.name),9,x))),128))],512),[[v,r.contributionForm.memberId]])]),o("div",N,[o("div",_,[e[10]||(e[10]=o("label",{for:"type"},"Tipo*",-1)),d(o("select",{id:"type","onUpdate:modelValue":e[1]||(e[1]=t=>r.contributionForm.type=t),required:""},e[9]||(e[9]=[o("option",{value:"dizimo"},"Dízimo",-1),o("option",{value:"oferta"},"Oferta",-1)]),512),[[v,r.contributionForm.type]])]),o("div",k,[e[11]||(e[11]=o("label",{for:"amount"},"Valor*",-1)),d(o("input",{type:"number",id:"amount","onUpdate:modelValue":e[2]||(e[2]=t=>r.contributionForm.amount=t),required:"",step:"0.01",min:"0",placeholder:"0,00"},null,512),[[p,r.contributionForm.amount]])]),o("div",z,[e[13]||(e[13]=o("label",{for:"paymentMethod"},"Forma de Pagamento*",-1)),d(o("select",{id:"paymentMethod","onUpdate:modelValue":e[3]||(e[3]=t=>r.contributionForm.paymentMethod=t),required:""},e[12]||(e[12]=[o("option",{value:"dinheiro"},"Dinheiro",-1),o("option",{value:"pix"},"PIX",-1),o("option",{value:"cartao"},"Cartão",-1),o("option",{value:"transferencia"},"Transferência",-1)]),512),[[v,r.contributionForm.paymentMethod]])])]),o("div",E,[e[14]||(e[14]=o("label",{for:"date"},"Data*",-1)),d(o("input",{type:"date",id:"date","onUpdate:modelValue":e[4]||(e[4]=t=>r.contributionForm.date=t),required:""},null,512),[[p,r.contributionForm.date]])]),o("div",T,[e[15]||(e[15]=o("label",{for:"notes"},"Observações",-1)),d(o("textarea",{id:"notes","onUpdate:modelValue":e[5]||(e[5]=t=>r.contributionForm.notes=t),placeholder:"Observações adicionais"},null,512),[[p,r.contributionForm.notes]])])]),e[16]||(e[16]=o("button",{type:"submit",class:"submit-button"}," Registrar Contribuição ",-1))],32)]),o("div",U,[e[18]||(e[18]=o("h2",null,"Contribuições Registradas",-1)),r.contributions.length>0?(s(),l("table",q,[e[17]||(e[17]=o("thead",null,[o("tr",null,[o("th",null,"Membro"),o("th",null,"Tipo"),o("th",null,"Valor"),o("th",null,"Data"),o("th",null,"Forma de Pagamento"),o("th",null,"Ações")])],-1)),o("tbody",null,[(s(!0),l(y,null,S(r.contributions,t=>(s(),l("tr",{key:t.id},[o("td",null,m(r.getMemberName(t.memberId)),1),o("td",null,m(t.type==="dizimo"?"Dízimo":"Oferta"),1),o("td",null,"R$ "+m(Number(t.amount).toFixed(2)),1),o("td",null,m(new Date(t.date).toLocaleDateString()),1),o("td",null,m(t.paymentMethod),1),o("td",null,[o("button",{onClick:b=>r.deleteContribution(t.id),class:"delete-button"}," Excluir ",8,J)])]))),128))])])):(s(),l("p",R,"Nenhuma contribuição registrada"))])])}const A=F(C,[["render",B],["__scopeId","data-v-192d5c11"]]);export{A as default};
